<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ì˜¤ëŠ˜, ê´œì°®ì•˜ë‚˜ìš”? ğŸŒ±</title>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-image: url('https://i.ibb.co/MyLm7bWJ/Chat-GPT-Image-2025-4-18-12-01-33.png');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background-color: rgba(255,255,255,0.7);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .weather-box {
      text-align: center;
      font-size: 1.2rem;
      margin-bottom: 24px;
    }
    .routine-box h3 {
      margin-top: 24px;
      font-size: 1.2rem;
      color: #444;
    }
    .routine-box ul {
      padding-left: 20px;
    }
    .routine-box li {
      margin: 8px 0;
    }
    input[type="checkbox"] {
      transform: scale(1.2);
      margin-right: 8px;
    }
    .footer {
      text-align: center;
      font-size: 0.9rem;
      margin-top: 30px;
      color: #777;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="weather-box">
      <p>ğŸ“ <span id="city">...</span>ëŠ” <span id="weather">...</span> <span id="weatherIcon"></span></p>
      <p>ğŸŒ¡ í˜„ì¬ ì˜¨ë„: <span id="temperature">...</span>Â°C</p>
      <p>ğŸ’¬ <span id="quote">ê¸°ë¶„ ì¢‹ì€ í•˜ë£¨ê°€ ë˜ê¸¸ ë°”ë˜ìš” ğŸ€</span></p>
    </div>

    <div class="routine-box" id="routineContainer"></div>

    <div class="footer">ë‚´ ë§ˆìŒì„ ìœ„í•œ ì‘ì€ ë£¨í‹´ âœ¨</div>
  </div>

  <script>
    const routines = {
      'ë§‘ìŒ': {
        ìš´ë™: ['ëŸ¬ë‹ 20ë¶„ + ìŠ¤íŠ¸ë ˆì¹­', 'ê³µì› ì‚°ì±…', 'ìš”ê°€ ë£¨í‹´: íƒœì–‘ê²½ë°° ìì„¸ ì¤‘ì‹¬', 'ìì „ê±° íƒ€ê¸°', 'í™ˆíŠ¸: ëŒ„ìŠ¤ ë‹¤ì´ì–´íŠ¸ ì˜ìƒ ë”°ë¼í•˜ê¸°'],
        ìŒì•…: ['ë¹Œë¦¬ ì•„ì¼ë¦¬ì‹œ â€“ â€œMy Futureâ€', 'ì„ ìš°ì •ì•„ â€“ â€œë„ë§ê°€ìâ€'],
        ìŒì‹: ['ì‹œë¦¬ì–¼ + ê³¼ì¼ + ìš”ê±°íŠ¸', 'ìƒëŸ¬ë“œ + ë‹­ê°€ìŠ´ì‚´', 'ì•„ë³´ì¹´ë„ ì˜¤í”ˆ ìƒŒë“œìœ„ì¹˜'],
        ìƒ‰: ['ë…¸ë€ìƒ‰', 'í•˜ëŠ˜ìƒ‰', 'ì—°ë‘ìƒ‰', 'ë¼ë²¤ë”', 'ë¯¼íŠ¸']
      },
      'íë¦¼': {
        ìš´ë™: ['ì‹¤ë‚´ ìŠ¤í… ì›Œí‚¹', 'ëŒ„ìŠ¤ ì»¤ë²„ ì˜ìƒ ë”°ë¼í•˜ê¸°', 'í”Œë­í¬ & ìŠ¤ì¿¼íŠ¸ ë£¨í‹´'],
        ìŒì•…: ['ì–´ë°˜ìì¹´íŒŒ â€“ â€œê·¸ë‚ ì— ìš°ë¦¬â€', 'Dean â€“ â€œInstagramâ€'],
        ìŒì‹: ['ì˜¤íŠ¸ë°€ + ë°”ë‚˜ë‚˜', 'ë‹¬ê±€ í† ìŠ¤íŠ¸', 'ë‹­ì£½'],
        ìƒ‰: ['ì—°ë³´ë¼', 'ì§„íšŒìƒ‰', 'ì˜¬ë¦¬ë¸Œ']
      },
      'ë¹„': {
        ìš´ë™: ['ì‹¤ë‚´ ìš”ê°€ + ëª…ìƒ', 'ê³„ë‹¨ ì˜¤ë¥´ê¸°', 'í™ˆíŠ¸ 10ë¶„ ë£¨í‹´'],
        ìŒì•…: ['ì•„ì´ìœ  â€“ â€œRain Dropâ€', 'ë°±ì˜ˆë¦° â€“ â€œBye bye my blueâ€'],
        ìŒì‹: ['ê°ìì „ + ë§‰ê±¸ë¦¬', 'ë”°ëœ»í•œ êµ­ìˆ˜ or ìš°ë™', 'ìŠ¤í”„ + í† ìŠ¤íŠ¸'],
        ìƒ‰: ['ì²­ë¡', 'ì™€ì¸ìƒ‰', 'í°ìƒ‰']
      }
    };

    const quotes = [
      'ì˜¤ëŠ˜ë„ ë‚˜ì—ê²Œ ì¹œì ˆí•´ì§€ê¸° ğŸŒ±',
      'í•˜ëŠ˜ì²˜ëŸ¼ ê°€ë³ê³  ë§‘ì€ í•˜ë£¨ ë˜ê¸¸ â˜€',
      'ë„ˆë¬´ ì• ì“°ì§€ ì•Šì•„ë„ ê´œì°®ì•„ìš” ğŸŒ·',
      'ë§ˆìŒì´ í•˜ëŠ” ë§ì„ ë“¤ì–´ë³´ì„¸ìš” ğŸ’¬',
      'ì‘ì€ ë£¨í‹´ì´ í° ë³€í™”ë¥¼ ë§Œë“¤ì–´ìš” ğŸŒ¿'
    ];

    const getRandomItems = (arr, n) => arr.sort(() => 0.5 - Math.random()).slice(0, n);

    const getWeatherEmoji = (main) => {
      switch (main) {
        case 'Clear': return 'â˜€';
        case 'Clouds': return 'â˜';
        case 'Rain': case 'Drizzle': return 'ğŸŒ§';
        case 'Snow': return 'â„';
        default: return 'ğŸŒ¤';
      }
    };

    const convertToCelsius = (kelvin) => (kelvin - 273.15).toFixed(1);

    const translateWeather = (eng) => {
      const map = { 'Clear': 'ë§‘ìŒ', 'Clouds': 'íë¦¼', 'Rain': 'ë¹„', 'Drizzle': 'ë¹„', 'Snow': 'ëˆˆ', 'Mist': 'ì•ˆê°œ' };
      return map[eng] || 'ë§‘ìŒ';
    };

    const displayRoutines = (weather) => {
      const category = routines[weather] || routines['ë§‘ìŒ'];
      const container = document.getElementById('routineContainer');
      let html = '';
      for (let type in category) {
        html += `<div><h3>ğŸŒ¸ ${type}</h3><ul>`;
        getRandomItems(category[type], 3).forEach(item => {
          html += `<li><label><input type="checkbox"/> ${item}</label></li>`;
        });
        html += '</ul></div>';
      }
      container.innerHTML = html;
    };

    const updateUI = (data) => {
      const city = data.name;
      const tempC = convertToCelsius(data.main.temp);
      const weatherEng = data.weather[0].main;
      const weatherKo = translateWeather(weatherEng);
      const emoji = getWeatherEmoji(weatherEng);

      document.getElementById('city').textContent = city;
      document.getElementById('temperature').textContent = tempC;
      document.getElementById('weather').textContent = weatherKo;
      document.getElementById('weatherIcon').textContent = emoji;
      document.getElementById('quote').textContent = quotes[Math.floor(Math.random() * quotes.length)];

      displayRoutines(weatherKo);
    };

    const API_KEY = 'ae2dd5af466f227db77a00f5aac8972d';

    navigator.geolocation.getCurrentPosition(
      (pos) => {
        const lat = pos.coords.latitude;
        const lon = pos.coords.longitude;
        fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}`)
          .then(res => res.json())
          .then(data => updateUI(data))
          .catch(() => alert('ë‚ ì”¨ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.'));
      },
      () => alert('ìœ„ì¹˜ ì •ë³´ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤.')
    );
  </script>
</body>
</html>

